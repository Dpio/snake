(this.webpackJsonpsnake=this.webpackJsonpsnake||[]).push([[0],{13:function(t,e,s){},14:function(t,e,s){},15:function(t,e,s){},17:function(t,e,s){"use strict";s.r(e);var o=s(1),a=s.n(o),i=s(4),h=s.n(i),n=(s(13),s(14),s(15),s(5)),r=s(6),c=s(2),d=s(8),p=s(7),l=s(0),u=function(t){var e=t.width,s=t.height,o=t.score,a=t.newHighScore,i=t.highScore;return Object(l.jsx)("div",{id:"GameBoard",style:{width:e,height:s,borderWidth:e/50},children:Object(l.jsxs)("div",{id:"GameOver",style:{fontSize:e/15},children:[Object(l.jsx)("div",{id:"GameOverText",children:"GAME OVER"}),Object(l.jsxs)("div",{children:["Your score: ",o]}),Object(l.jsxs)("div",{children:[a?"New local ":"Local ","high score:"," ",i]}),Object(l.jsx)("div",{id:"PressSpaceText",children:"Press Space to restart"})]})})},g=function(t){Object(d.a)(s,t);var e=Object(p.a)(s);function s(t){var o;return Object(n.a)(this,s),(o=e.call(this,t)).handleKeyDown=o.handleKeyDown.bind(Object(c.a)(o)),o.state={width:0,height:0,blockWidth:0,blockHeight:0,gameLoopTimeout:50,timeoutId:0,startSnakeSize:6,snake:[],apple:{Xpos:10,Ypos:10},direction:"right",directionChanged:!1,isGameOver:!1,snakeColor:o.props.snakeColor||o.getRandomColor(),appleColor:o.props.appleColor||o.getRandomColor(),score:0,highScore:Number(localStorage.getItem("snakeHighScore"))||0,newHighScore:!1},o}return Object(r.a)(s,[{key:"componentDidMount",value:function(){this.initGame(),window.addEventListener("keydown",this.handleKeyDown),this.gameLoop()}},{key:"initGame",value:function(){var t,e=this.props.percentageWidth||40,s=(null===(t=document.getElementById("GameBoard"))||void 0===t?void 0:t.parentElement.offsetWidth)*(e/100);(s-=s%30)<30&&(s=30);var o=s/3*2,a=s/30,i=o/20,h=this.props.startSnakeSize||6,n=[],r=s/2,c=o/2,d={Xpos:s/2,Ypos:o/2};n.push(d);for(var p=1;p<h;p++){var l={Xpos:r-=a,Ypos:c};n.push(l)}for(var u=Math.floor(Math.random()*((s-a)/a+1))*a,g=Math.floor(Math.random()*((o-i)/i+1))*i;g===n[0].Ypos;)g=Math.floor(Math.random()*((o-i)/i+1))*i;this.setState({width:s,height:o,blockWidth:a,blockHeight:i,startSnakeSize:h,snake:n,apple:{Xpos:u,Ypos:g}}),console.log("init done")}},{key:"gameLoop",value:function(){var t=this,e=setTimeout((function(){t.state.isGameOver||(t.moveSnake(),t.tryToEatSnake(),t.tryToEatApple(),t.setState({directionChanged:!1})),t.gameLoop()}),this.state.gameLoopTimeout);this.setState({timeoutId:e})}},{key:"componentWillUnmount",value:function(){clearTimeout(this.state.timeoutId),window.removeEventListener("keydown",this.handleKeyDown)}},{key:"resetGame",value:function(){var t=this.state.width,e=this.state.height,s=this.state.blockWidth,o=this.state.blockHeight,a=this.state.apple,i=[],h=t/2,n=e/2,r={Xpos:t/2,Ypos:e/2};i.push(r);for(var c=1;c<this.state.startSnakeSize;c++){var d={Xpos:h-=s,Ypos:n};i.push(d)}for(a.Xpos=Math.floor(Math.random()*((t-s)/s+1))*s,a.Ypos=Math.floor(Math.random()*((e-o)/o+1))*o;this.isAppleOnSnake(a.Xpos,a.Ypos);)a.Xpos=Math.floor(Math.random()*((t-s)/s+1))*s,a.Ypos=Math.floor(Math.random()*((e-o)/o+1))*o;this.setState({snake:i,apple:a,direction:"right",directionChanged:!1,isGameOver:!1,gameLoopTimeout:50,snakeColor:this.getRandomColor(),appleColor:this.getRandomColor(),score:0,newHighScore:!1})}},{key:"getRandomColor",value:function(){for(var t="#",e=0;e<6;e++)t+="0123456789ABCDEF"[Math.floor(16*Math.random())];return t}},{key:"moveSnake",value:function(){var t=this.state.snake,e=this.state.snake[0].Xpos,s=this.state.snake[0].Ypos,o=e,a=s;this.moveHead();for(var i=1;i<t.length;i++)o=t[i].Xpos,a=t[i].Ypos,t[i].Xpos=e,t[i].Ypos=s,e=o,s=a;this.setState({snake:t})}},{key:"tryToEatApple",value:function(){var t=this.state.snake,e=this.state.apple;if(t[0].Xpos===e.Xpos&&t[0].Ypos===e.Ypos){var s=this.state.width,o=this.state.height,a=this.state.blockWidth,i=this.state.blockHeight,h={Xpos:e.Xpos,Ypos:e.Ypos},n=this.state.highScore,r=this.state.newHighScore,c=this.state.gameLoopTimeout;for(t.push(h),e.Xpos=Math.floor(Math.random()*((s-a)/a+1))*a,e.Ypos=Math.floor(Math.random()*((o-i)/i+1))*i;this.isAppleOnSnake(e.Xpos,e.Ypos);)e.Xpos=Math.floor(Math.random()*((s-a)/a+1))*a,e.Ypos=Math.floor(Math.random()*((o-i)/i+1))*i;this.state.score===n&&(n++,localStorage.setItem("snakeHighScore",n.toString()),r=!0),c>25&&(c-=.5),this.setState({snake:t,apple:e,score:this.state.score+1,highScore:n,newHighScore:r,gameLoopTimeout:c})}}},{key:"tryToEatSnake",value:function(){for(var t=this.state.snake,e=1;e<t.length;e++)t[0].Xpos===t[e].Xpos&&t[0].Ypos===t[e].Ypos&&this.setState({isGameOver:!0})}},{key:"isAppleOnSnake",value:function(t,e){for(var s=this.state.snake,o=0;o<s.length;o++)if(t===s[o].Xpos&&e===s[o].Ypos)return!0;return!1}},{key:"moveHead",value:function(){switch(this.state.direction){case"left":this.moveHeadLeft();break;case"up":this.moveHeadUp();break;case"right":this.moveHeadRight();break;default:this.moveHeadDown()}}},{key:"moveHeadLeft",value:function(){var t=this.state.width,e=this.state.blockWidth,s=this.state.snake;s[0].Xpos=s[0].Xpos<=0?t-e:s[0].Xpos-e,this.setState({snake:s})}},{key:"moveHeadUp",value:function(){var t=this.state.height,e=this.state.blockHeight,s=this.state.snake;s[0].Ypos=s[0].Ypos<=0?t-e:s[0].Ypos-e,this.setState({snake:s})}},{key:"moveHeadRight",value:function(){var t=this.state.width,e=this.state.blockWidth,s=this.state.snake;s[0].Xpos=s[0].Xpos>=t-e?0:s[0].Xpos+e,this.setState({snake:s})}},{key:"moveHeadDown",value:function(){var t=this.state.height,e=this.state.blockHeight,s=this.state.snake;s[0].Ypos=s[0].Ypos>=t-e?0:s[0].Ypos+e,this.setState({snake:s})}},{key:"handleKeyDown",value:function(t){if(this.state.isGameOver&&32===t.keyCode)return console.log("restart"),void this.resetGame();if(!this.state.directionChanged){switch(t.keyCode){case 37:case 65:this.goLeft();break;case 38:case 87:this.goUp();break;case 39:case 68:this.goRight();break;case 40:case 83:this.goDown()}this.setState({directionChanged:!0})}}},{key:"goLeft",value:function(){var t="right"===this.state.direction?"right":"left";this.setState({direction:t})}},{key:"goUp",value:function(){var t="down"===this.state.direction?"down":"up";this.setState({direction:t})}},{key:"goRight",value:function(){var t="left"===this.state.direction?"left":"right";this.setState({direction:t})}},{key:"goDown",value:function(){var t="up"===this.state.direction?"up":"down";this.setState({direction:t})}},{key:"render",value:function(){var t=this;return this.state.isGameOver?Object(l.jsx)(u,{width:this.state.width,height:this.state.height,highScore:this.state.highScore,newHighScore:this.state.newHighScore,score:this.state.score}):Object(l.jsxs)("div",{id:"GameBoard",style:{width:this.state.width,height:this.state.height,borderWidth:this.state.width/50},children:[this.state.snake.map((function(e,s){return Object(l.jsx)("div",{className:"Block",style:{width:t.state.blockWidth,height:t.state.blockHeight,left:e.Xpos,top:e.Ypos,background:t.state.snakeColor}},s)})),Object(l.jsx)("div",{className:"Block",style:{width:this.state.blockWidth,height:this.state.blockHeight,left:this.state.apple.Xpos,top:this.state.apple.Ypos,background:this.state.appleColor}}),Object(l.jsxs)("div",{id:"Score",style:{fontSize:this.state.width/20},children:["HIGH-SCORE: ",this.state.highScore,"\u2002\u2002\u2002\u2002SCORE:"," ",this.state.score]})]})}}]),s}(a.a.Component);var k=function(){return Object(l.jsx)(g,{})},v=function(t){t&&t instanceof Function&&s.e(3).then(s.bind(null,18)).then((function(e){var s=e.getCLS,o=e.getFID,a=e.getFCP,i=e.getLCP,h=e.getTTFB;s(t),o(t),a(t),i(t),h(t)}))};h.a.render(Object(l.jsx)(a.a.StrictMode,{children:Object(l.jsx)(k,{})}),document.getElementById("root")),v()}},[[17,1,2]]]);
//# sourceMappingURL=main.322b0ef9.chunk.js.map